const n=250,t=240;let i={delay:n,maxTry:t,until:null};function r(n){return i=Object.assign(Object.assign({},i),n),o()}function o(){return Object.assign({},i)}function e(n,t,i,r){return new(i||(i=Promise))((function(o,e){function u(n){try{s(r.next(n))}catch(n){e(n)}}function c(n){try{s(r.throw(n))}catch(n){e(n)}}function s(n){var t;n.done?o(n.value):(t=n.value,t instanceof i?t:new i((function(n){n(t)}))).then(u,c)}s((r=r.apply(n,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const u=n=>()=>new Promise(((t,i)=>{try{t(n())}catch(n){i(n)}}));let c=6e4;function s(n){c=n}function d(){return c}function f(n=c){return new Promise((t=>setTimeout(t,n)))}function l(n,t,i){return e(this,void 0,void 0,(function*(){const r=u(n);return yield y(r,t,i)}))}function y(n,t=c,i=new v("function did not complete within allowed time")){return e(this,void 0,void 0,(function*(){const r=Symbol("DELAY_EXPIRED"),o=yield Promise.race([n(),a(t,r)]);if(o===r)throw i;return o}))}const a=(n,t)=>e(void 0,void 0,void 0,(function*(){return yield f(n),t}));class v extends Error{constructor(){super(...arguments),this.isTimeout=!0}}function h(n){return!0===n.isTimeout}function m(t){return void 0===t?()=>n:"function"==typeof t?t:()=>t}class T extends Error{constructor(n=void 0){super("function did not complete within allowed number of attempts"),this.lastResult=n,this.tooManyTries=!0}getLastResult(){return this.lastResult}}function p(n){return!0===n.tooManyTries}function w(n,t){return e(this,void 0,void 0,(function*(){const i=u(n);return yield b(i,t)}))}function b(n,i){return e(this,void 0,void 0,(function*(){const r=function(n,i){const r=Object.assign(Object.assign({},o()),i);return Object.assign(Object.assign({},r),{currentTry:n,maxTry:r.maxTry||t,delay:m(r.delay),until:r.until?r.until:()=>!0})}(1,i);return yield x(n,r)}))}function x(n,t){return e(this,void 0,void 0,(function*(){const i=t.currentTry<t.maxTry;try{const r=yield n();if(t.until(r))return r;if(i)return yield g(n,t,r);throw new T(r)}catch(r){if(!p(r)&&i)return t.onError&&t.onError(r),yield g(n,t);throw t.onMaxRetryFunc&&t.onMaxRetryFunc(r),r}}))}function g(n,t,i){return e(this,void 0,void 0,(function*(){const r=t.delay({currentTry:t.currentTry,maxTry:t.maxTry,lastDelay:t.lastDelay,lastResult:i});yield f(r);const o=Object.assign(Object.assign({},t),{currentTry:t.currentTry+1});return yield x(n,o)}))}const j=n=>t=>Object.assign(Object.assign({},t),{until:n}),O=j((n=>null!=n));function E(n,t){return e(this,void 0,void 0,(function*(){const i=O(t);return yield w(n,i)}))}function R(n,t){return e(this,void 0,void 0,(function*(){const i=O(t);return yield b(n,i)}))}function M(n,t){return(...i)=>e(this,void 0,void 0,(function*(){return yield R((()=>e(this,void 0,void 0,(function*(){return yield n(...i)}))),t)}))}const D=j((n=>1==n));function P(n,t){return e(this,void 0,void 0,(function*(){const i=D(t);return yield w(n,i)}))}function S(n,t){return e(this,void 0,void 0,(function*(){const i=D(t);return yield b(n,i)}))}function F(n,t){return(...i)=>e(this,void 0,void 0,(function*(){return yield P((()=>n(...i)),t)}))}function L(n,t){return(...i)=>e(this,void 0,void 0,(function*(){return yield S((()=>e(this,void 0,void 0,(function*(){return yield n(...i)}))),t)}))}const k=j((n=>n.ok));function A(n,t){return e(this,void 0,void 0,(function*(){const i=k(t);return yield b(n,i)}))}function I(n,t){return(...i)=>e(this,void 0,void 0,(function*(){return yield A((()=>e(this,void 0,void 0,(function*(){return yield n(...i)}))),t)}))}function X(n){return({lastDelay:t})=>void 0!==t?t*n:n}function Y(n,t){return({currentTry:i})=>{if(1===i)return n;return n*((i-1)*t)}}function _(n,t){const i=t-n+1;return()=>Math.floor(Math.random()*i+n)}export{X as createExponetialDelay,Y as createMutiplicableDelay,_ as createRandomDelay,d as getDefaultDuration,o as getDefaultRetryOptions,h as isTimeoutError,p as isTooManyTries,w as retry,b as retryAsync,R as retryAsyncUntilDefined,M as retryAsyncUntilDefinedDecorator,A as retryAsyncUntilResponse,I as retryAsyncUntilResponseDecorator,S as retryAsyncUntilTruthy,L as retryAsyncUntilTruthyDecorator,E as retryUntilDefined,P as retryUntilTruthy,F as retryUntilTruthyDecorator,s as setDefaultDuration,r as setDefaultRetryOptions,f as wait,l as waitUntil,y as waitUntilAsync};
